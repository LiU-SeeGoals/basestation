#include <protobuf-c/protobuf-c.h>
#include <ssl_wrapper.pb-c.h>
#include <stdio.h>
#include <stdlib.h>

const unsigned char data[] = {10, 160, 2, 8, 232, 13, 17, 139, 221, 214, 22, 158, 119, 60, 64, 25, 139, 221, 214, 22, 158, 119, 60, 64, 32, 2, 42, 25, 13, 173, 73, 110, 63, 29, 0, 0, 0, 0, 37, 0, 0, 0, 0, 53, 0, 0, 0, 0, 61, 0, 0, 0, 0, 58, 32, 13, 0, 0, 128, 63, 16, 1, 29, 216, 126, 187, 196, 37, 103, 144, 25, 45, 45, 0, 0, 0, 128, 53, 216, 126, 187, 196, 61, 103, 144, 25, 45, 58, 32, 13, 0, 0, 128, 63, 16, 2, 29, 216, 126, 187, 196, 37, 0, 0, 140, 196, 45, 0, 0, 0, 0, 53, 216, 126, 187, 196, 61, 0, 0, 140, 196, 58, 32, 13, 0, 0, 128, 63, 16, 3, 29, 177, 125, 9, 196, 37, 86, 172, 9, 46, 45, 0, 0, 0, 128, 53, 177, 125, 9, 196, 61, 86, 172, 9, 46, 58, 32, 13, 0, 0, 128, 63, 16, 4, 29, 108, 63, 28, 197, 37, 133, 129, 250, 45, 45, 0, 0, 0, 128, 53, 108, 63, 28, 197, 61, 133, 129, 250, 45, 58, 32, 13, 0, 0, 128, 63, 16, 5, 29, 108, 255, 96, 197, 37, 44, 106, 81, 174, 45, 0, 0, 0, 128, 53, 108, 255, 96, 197, 61, 44, 106, 81, 174, 58, 32, 13, 0, 0, 128, 63, 16, 7, 29, 108, 255, 71, 197, 37, 0, 128, 59, 196, 45, 0, 0, 0, 128, 53, 108, 255, 71, 197, 61, 0, 128, 59, 196, 58, 32, 13, 0, 0, 128, 63, 16, 9, 29, 108, 255, 71, 197, 37, 0, 128, 187, 196, 45, 0, 0, 0, 0, 53, 108, 255, 71, 197, 61, 0, 128, 187, 196};

static void* allocMem(void *alloc_data, size_t size) {
	return malloc(size);
}

static void freeMem(void* alloc_data, void* ptr) {
	free(ptr);
}


int main() {
    ProtobufCAllocator allocator;
    allocator.alloc = &allocMem;
    allocator.free = &freeMem;
    SSLWrapperPacket* packet = NULL;
    packet = ssl__wrapper_packet__unpack(&allocator, sizeof(data), data);
    if (data == NULL) {
        printf("Decode failed\n");
    }
}
